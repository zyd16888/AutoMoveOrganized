name: Auto Move Scraped
description: 自动移动已刮削的影片到指定目录
version: 1.0.0
url: https://github.com/yourusername/stash-automove
settings:
  downloadPath:
    displayName: 下载目录路径
    description: 新影片下载的目录
    type: STRING
  targetPath:
    displayName: 目标目录路径
    description: 刮削完成后移动到的目录
    type: STRING
  checkInterval:
    displayName: 检查间隔(秒)
    description: 多久检查一次新文件,默认300秒
    type: NUMBER
  useOrganizedFlag:
    displayName: 使用"已整理"标记
    description: 使用organized字段判断刮削完成(推荐,需在刮削器中启用"Mark as Organized")
    type: BOOLEAN
  requireStudio:
    displayName: 需要工作室信息
    description: 仅在不使用organized标记时有效
    type: BOOLEAN
  requirePerformers:
    displayName: 需要演员信息
    description: 仅在不使用organized标记时有效
    type: BOOLEAN
  autoScan:
    displayName: 自动扫描
    description: 是否自动扫描下载目录
    type: BOOLEAN
  autoIdentify:
    displayName: 自动刮削
    description: 是否自动刮削新发现的场景
    type: BOOLEAN
  moveMode:
    displayName: 移动模式
    description: move=移动文件, copy=复制文件, hardlink=创建硬链接
    type: STRING
tasks:
  - name: 运行自动移动
    description: 检查并移动已刮削的影片
    defaultArgs:
      mode: check_and_move
  - name: 仅扫描新文件
    description: 只扫描下载目录的新文件
    defaultArgs:
      mode: scan_only
  - name: 仅移动已刮削
    description: 只移动已刮削完成的文件
    defaultArgs:
      mode: move_only
  - name: 启动自动监控
    description: 持续监控并自动处理(后台运行)
    defaultArgs:
      mode: auto_monitor
hooks:
  - name: 扫描后自动刮削
    description: 在扫描完成后自动刮削新场景
    triggeredBy:
      - Scene.Create
    defaultArgs:
      mode: auto_scrape
interface: raw
exec:
  - python3
  - "{pluginDir}/autoMove.py"
  - "{serverConnection}"
  - --mode
  - "{args.mode}"