# plugins/auto_move_organized.yml

name: Auto Move Organized
description: >
  在场景更新后，把已整理(organized)的文件移动到指定目录，并按模板重命名。
  也可以从 Tasks 页面手动触发。

version: "0.2.0"
url: https://example.com/auto-move-organized

# UI 设置：在设置 -> 插件 -> 本插件 里会显示
settings:
  target_root:
    displayName: 目标根目录（移动到此目录下）
    type: STRING
  filename_template:
    displayName: 命名模板（相对 target_root 的路径+文件名）\n可用占位符示例（不完全列表，实际以 build_template_vars 返回为准）：\n      {id}                -> scene id\n      {scene_title}       -> 场景标题\n      {scene_date}        -> 场景日期（原始字符串，例如 2025-01-02）\n      {date_year}         -> 场景年份\n      {date_month}        -> 场景月份（两位）\n      {date_day}          -> 场景日期（两位）\n      {studio} / {studio_name}\n      {studio_id}\n      {code}\n      {director}\n      {performers}\n      {first_performer}\n      {performer_count}\n      {tag_names} / {tags}\n      {group_name}\n      {rating} / {rating100}\n      {original_basename}\n      {original_name}\n      {ext}
    type: STRING
  move_only_organized:
    displayName: 只移动「已整理」文件
    type: BOOLEAN
  dry_run:
    displayName: 仅模拟（不真的移动）
    type: BOOLEAN
  write_nfo:
    displayName: 生成 NFO 文件
    type: BOOLEAN
  download_poster:
    displayName: 下载封面图到视频目录
    type: BOOLEAN
  overlay_studio_logo_on_poster:
    displayName: 在封面右上角叠加厂商图标
    type: BOOLEAN
  download_actor_images:
    displayName: 下载演员图片到 actors 目录
    type: BOOLEAN
  export_actor_nfo:
    displayName: 导出演员 NFO（actors 目录）
    type: BOOLEAN
  translate_enable:
    displayName: 启用 AI 翻译
    type: BOOLEAN
  translate_title:
    displayName: 翻译标题
    type: BOOLEAN
  translate_plot:
    displayName: 翻译简介
    type: BOOLEAN
  translate_api_base:
    displayName: 翻译 API Base URL
    type: STRING
  translate_api_key:
    displayName: 翻译 API Key
    type: STRING
  translate_model:
    displayName: 翻译模型名称
    type: STRING
  translate_temperature:
    displayName: 翻译温度 (0-2，字符串)
    type: STRING
  translate_prompt:
    displayName: 翻译提示词 (system prompt)
    type: STRING

# 外部脚本调用方式
exec:
  - python
  - "{pluginDir}/auto_move_organized.py"

# 原始 JSON 输入
interface: raw

# 错误日志级别
errLog: info

tasks:
  - name: Run Auto Move Organized
    description: 手动执行：根据设置移动选中场景（或在 args.sceneIds 指定的场景）
    defaultArgs: {}

hooks:
  - name: run
    description: 在场景更新后自动移动该场景下的已整理文件(暂未实现功能)
    triggeredBy:
      - Scene.Update.Post
    defaultArgs: {}
